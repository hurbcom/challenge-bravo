swagger: '2.0'
info:
  title: 'Currency Converter API'
  description: 'API de conversão de moedas online'
  version: 1.0.0
  contact:
    email: 'vinibda@gmail.com'
host: 'localhost:3000'
basePath: '/'
tags:
  - name: 'converter'
    description: 'Endpopints relacionados a conversão de moedas'
  - name: 'quotation'
    description: 'Endpoint relacionados as cotações'
  - name: 'currency'
    description: 'Endpoints relacionados as Moedas'
schemes:
  - 'http'
paths:
  /converter:
    get:
      tags:
        - 'converter'
      summary: 'Realiza Conversão'
      description: 'Obtem o valor convertido da moeda selecionada'
      operationId: 'converterCurrency'
      produces:
        - 'application/json'
      parameters:
        - name: from
          in: query
          description: Moeda Origem
          required: true
          schema:
            type: string
            example: BRL
        - name: to
          in: query
          description: Moeda Destino
          required: true
          schema:
            type: string
            example: USD
        - name: amount
          in: query
          description: Valor
          required: true
          schema:
            type: number
            example: 59.90
        - name: type
          in: query
          description: Tipo do valor [buy | sell] - Caso não informado, será usado sell como padrão
          schema:
            type: string
            example: sell
      responses:
        200:
          description: Success
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: false
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 200
              message:
                type: object
                properties:
                  from:
                    type: string
                    example: BRL
                  to:
                    type: string
                    example: USD
                  amount:
                    type: number
                    example: 11.2432
        400:
          description: Bad Request
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 400
              message:
                type: string
                example: '{validationErrorMessage}'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 400
              message:
                type: string
                example: '{badRequestValidation}'
        500:
          description: Internal Server Error
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 500
              message:
                type: string
                example: '{errorMessage}'
  /quotation/update:
    post:
      tags:
        - 'quotation'
      summary: 'Atualiza Cotações'
      description: 'Realiza a atualização das cotações online'
      operationId: 'updateQuotation'
      produces:
        - 'application/json'
      responses:
        200:
          description: Success
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: false
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 200
              message:
                type: string
                example: 'Atualização realizada com sucesso'
        500:
          description: Internal Server Error
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 500
              message:
                type: string
                example: 'errorMessage'
  /currency:
    post:
      tags:
        - 'currency'
      summary: 'Cadastrar Moeda'
      description: 'Realiza o cadastro de uma nova Moeda. Ao cadastrar a cotação, atente-se em utilizar como base USD para que as conversões sejam feitas corretamente'
      operationId: 'postCurrency'
      produces:
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'payload'
          description: 'Dados da Moeda a ser cadastrada'
          required: true
          schema:
            $ref: '#/definitions/Currency'
      responses:
        200:
          description: Success
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: false
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 200
              message:
                type: string
                example: Moeda cadastrada com sucesso
        400:
          description: Bad Request
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 400
              message:
                type: string
                example: '{validationErrorMessage}'
        500:
          description: Internal Server Error
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 500
              message:
                type: string
                example: 'errorMessage'
  /currency/list:
    get:
      tags:
        - 'currency'
      summary: 'Obtem Lista de Moedas'
      description: 'Lista as Moedas cadastradas no banco de dados'
      operationId: 'getCurrencyList'
      produces:
        - 'application/json'
      responses:
        200:
          description: Success
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: false
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 200
              message:
                type: string
                example:
                  - 'BRL'
                  - 'USD'
                  - 'EUR'
                  - 'BTC'
                  - 'ETH'
        500:
          description: Internal Server Error
          schema:
            type: object
            properties:
              error:
                type: boolean
                example: true
              date:
                type: date
                example: '2022-11-21T23:00:00.000Z'
              statusCode:
                type: number
                example: 500
              message:
                type: string
                example: 'errorMessage'
definitions:
  Currency:
    type: object
    properties:
      code:
        type: string
        example: 'AUD'
        summary: 'Código da Moeda'
      name:
        type: string
        example: Dólar Australiano
        summary: Nome da Moeda
      quotation:
        type: object
        properties:
          buy:
            type: number
            example: 0.6644
            summary: Cotação de compra
          sell:
            type: number
            example: 0.6648
            summary: Cotação de venda
