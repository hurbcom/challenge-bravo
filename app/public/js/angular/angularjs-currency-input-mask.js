/**
 * angularjs-currency-input-mask - AngularJS Multiple pattern currency input mask
 * @version v1.1.0
 * @link https://github.com/iangoop/angularjs-currency-input-mask#readme
 * @license MIT
 */
!function(a){"use strict";function d(i){function r(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(e){return e.replace(/(\$)/g,"$$$1")}return{value:function(e){return this._value=e,this},clear:function(){return this._value=this._value.replace(/[^\d]/g,""),this},minimum:function(){var e,t,n,r;return 0<i.decimalSize&&(e=RegExp("^(\\d{1,"+i.decimalSize+"})$","g"),n="$1",r=i.decimalSize,t=new Array(r).concat([n]).join("0"),this._value=this._value.replace(e,t)),this},fraction:function(){var e,t;return 0<i.decimalSize&&(e=RegExp("(\\d)(?=\\d{"+i.decimalSize+"}$)","g"),t="$1"+i.decimal,this._value=this._value.replace(e,t)),this},ltrim:function(){var e=RegExp("(?=^)(0)(?!"+r(i.decimal)+")","g");return this._value=this._value.replace(e,""),this},group:function(){var e=0<i.decimalSize?r(i.decimal):"$",t=RegExp("(\\d)(?=(\\d{"+i.groupSize+"})+"+e+")","g"),n="$1"+i.group;return this._value=this._value.replace(t,n),this},currency:function(e){var t,n,r;return r="r"==i.orientation?(t=this.getRightOrientedCurrency(e),n=RegExp("(.)$","g"),"$1"+c(t)):(t=this.getLeftOrientedCurrency(e),n=RegExp("^(.)","g"),c(t)+"$1"),this._value=this._value.replace(n,r),this},getLeftOrientedCurrency:function(e){return(e||"")+(i.indentation||"")},getRightOrientedCurrency:function(e){return(i.indentation||"")+(e||"")},format:function(e,t){return this.value(e).clear().minimum().fraction().ltrim().group().currency(t).toString()},toString:function(){return this._value}}}function i(e,t){return(+(Math.round(e+"e+"+t)+"e-"+t)).toFixed(t)}a.module("cur.$mask",[]).factory("support",["$locale","$q","$timeout",function(c,e,u){return{config:function(e){var t=e||{},n=c.NUMBER_FORMATS||{},r=c.NUMBER_FORMATS.PATTERNS||{},i={indentation:"",orientation:"l",decimal:n.DECIMAL_SEP||".",group:n.GROUP_SEP||",",decimalSize:r.minFrac||2,groupSize:r.gSize||3};return a.extend({},i,t)},currency:function(e){return null!=e?e:c.NUMBER_FORMATS.CURRENCY_SYM||"$"},getCaretPosition:function(i){return e(function(r,e){u(function(){var e,t,n;document.selection?(i.focus(),t=(e=document.selection.createRange()).text.length,e.moveStart("character",-i.value.length),n=e.text.length-t,r({start:n,end:n+t})):i.selectionStart||"0"==i.selectionStart?r({start:i.selectionStart,end:i.selectionEnd}):r({start:0,end:0})})})},setCaretPosition:function(r,i){return e(function(t,n){u(function(){var e;r.setSelectionRange?(r.focus(),r.setSelectionRange(i,i),t(!0)):r.createTextRange&&((e=r.createTextRange()).collapse(!0),e.moveEnd("character",i),e.moveStart("character",i),e.select(),t(!0)),n(!1)})})},canMoveCaret:function(e){return e.setSelectionRange||e.createTextRange}}}]).directive("maskCurrency",["$locale","support",function(e,g){return{require:"ngModel",scope:{currency:"=maskCurrency",config:"="},link:function(t,a,e,o){var l,s;function f(e,t){return d(s).format(e,t)}function n(e,t){var n,r,i,c,u=null;return e&&(n=f(e,t),i=(i=n).replace(/[^\d]/g,""),0<s.decimalSize&&(c=RegExp("(\\d)(?=\\d{"+s.decimalSize+"}$)","g"),i=i.replace(c,"$1.")),u=i,n==e?n=void 0:n==l&&"000"==n.replace(/[^\d]/g,"")&&(n="",u=null),void 0!==n&&(l=n,o.$setViewValue(n),o.$render(),"r"==s.orientation&&(r=n.indexOf(d(s).getRightOrientedCurrency(t)),g.getCaretPosition(a[0]).then(function(e){e.start==e.end&&e.start>r&&g.setCaretPosition(a[0],r)})))),u}o&&(s=g.config(t.config),t.$watch("currency",function(){n(o.$viewValue,g.currency(t.currency))}),t.$watch("config",function(e){s=g.config(e),g.canMoveCaret(a[0])||(s.orientation="l"),o.$viewValue&&n(o.$viewValue)}),o.$parsers.push(function(e){return n(e,g.currency(t.currency))}),o.$formatters.push(function(e){return e?f(i(e,s.decimalSize),g.currency(t.currency)):null}))}}}]).filter("printCurrency",["support",function(r){return function(e,t,n){n=r.config(n);return e?d(n).format(i(e,n.decimalSize),t):null}}])}(angular);
